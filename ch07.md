## 7章 トランザクション

### トランザクションとは？
  - 全体の処理として成功(commit)もしくは失敗(中断(abort)、ロールバック(rollback))する仕組み
  - トランザクションがあれば？
    - エラー処理はシンプルになる
      - 全体、成功 or 失敗だけを考慮すれば良い
  - トランザクションが生まれた理由
    - データベースにアクセスするアプリケーションのためのプログラミングモデルをシンプルにするという目的で生み出された

## 7.1 トランザクションというとらえどころのない概念

### 7.1.1 ACIDの意味
  - トランザクションが提供する安全性の保証は`ACID`で示される。
    - A(原子性 Atomicity)
    - C(一貫性 Consistency)
    - I(分離性 Isolation)
    - D(永続性 Durability)
  
  - ACIDの条件を満たさないシステムは`BASE`と呼ばれる
    - BA(基本的に利用可能 Basically Available)
    - S(厳密ではない状態遷移 Soft state)
    - E(結果整合性 Eventually consistency)

### 7.1.1.1 原子性
  - 原子(アトミック)
    - それ以上小さな部分に分割出来ないもの
    - 原子性
      - 原子性のある処理を行ったら、 `処理完了` or `処理完了しない` の2つのパターンしかない
    - 原子性がないと？
      - 複数のデータを更新する処理で失敗が場合、データやビジネス的なロジックの整合性を保つために
        リトライしてデータ作成・更新したりする必要があったりする。
        が、重複して更新したりしまう恐れがあり、データを復元することが難しい
      - 原子性があれば、データ更新処理前と後だけを考えれば良い。

### 7.1.1.2 一貫性
  - 一貫性
    - さまざまな文脈で使われる
    - ACIDの文脈で説明すると、データについては必ず整合性がなくてはいけない
      - 例えば、会計処理、トランザクション前後で貸借は一致しなくてはいけない。
        - トランザクションの定義はアプリケーションの責任

### 7.1.1.3 分離性
  - 並行して実行されたトランザクションが影響しあわないこと
    - 詳しくは7.2で説明するみたい

### 7.1.1.4 永続性
  - 永続性とはハードウェアの障害や、データベースのクラッシュがあってもすべてのデータが失われないことを示している
    - 完全な永続性はないが、レプリケーションを多数作成することを永続性としたりしている。

## 7.1.2 単一オブジェクトと複数オブジェクトの操作


